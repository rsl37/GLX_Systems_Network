# /**
#  * GLX: Connect the World - Civic Networking Platform
#  * 
#  * Copyright (c) 2025 rsl37
#  * Licensed under PolyForm Shield License 1.0.0
#  * 
#  * ⚠️  TERMS:
#  * - Commercial use strictly prohibited without written permission from copyright holder
#  * - Forking/derivative works prohibited without written permission
#  * - Violations subject to legal action and damages
#  * 
#  * See LICENSE file in repository root for full terms.
#  * Contact: roselleroberts@pm.me for licensing inquiries
#  */

---
name: "CodeQL Configuration (Enhanced Coverage)"

# Enable default queries for comprehensive analysis
disable-default-queries: false

# Include comprehensive security and quality queries
queries:
  - uses: security-and-quality
  - uses: security-extended

# Include all relevant application directories for analysis
paths:
  - GLX_App_files/client/src
  - GLX_App_files/server
  - GLX_App_files/scripts
  - GLX_App_files/src

# Exclude only essential non-code directories
paths-ignore:
  - node_modules
  - dist
  - build
  - coverage
  - .git
  - "**/*.test.ts"
  - "**/*.test.js"
  - "**/*.spec.ts"
  - "**/*.spec.js"
  - "**/*.d.ts"

# Include JavaScript/TypeScript security packs for enhanced coverage
packs:
  # Include JavaScript security pack but don't make it blocking
  - "codeql/javascript-queries:AlertSuppression.ql"

# Filter out incremental analysis issues that can cause failures
query-filters:
  - exclude:
      # Exclude queries tagged with 'exclude-from-incremental' because these queries are known to cause failures or unreliable results during incremental analysis.
      # This prevents incremental analysis from breaking due to queries that are not designed to work correctly in incremental mode.
      tags: exclude-from-incremental
  - codeql/javascript-queries
