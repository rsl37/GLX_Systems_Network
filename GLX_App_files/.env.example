
# GLX Civic Networking App - Environment Variables Configuration
# Copy this file to .env and configure the values for your environment

# =============================================================================
# CORE APPLICATION SETTINGS
# =============================================================================

# NODE_ENV - Application environment mode
# Enables production settings in Express (security headers, optimizations, etc.)
# Values: development, production, staging, test
NODE_ENV=production

# PORT - Server port number 
# Vercel ignores this but your local/server deployment may read it
# Default: 3000 for development, dynamic for Vercel
PORT=3000

# DATA_DIRECTORY - Directory for database and uploads
# Used for SQLite database file and uploaded media storage
DATA_DIRECTORY=./data

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT_SECRET - Token signing key for authentication
# REQUIRED: Must be a long, secure random string (minimum 32 characters)
# Generate with: openssl rand -hex 32
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-min-32-chars

# JWT_REFRESH_SECRET - Refresh token signing key
# Used for refresh token validation and generation
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-this-in-production

# ENCRYPTION_MASTER_KEY - Master key for encrypting sensitive data
# Used for encrypting KYC documents and other sensitive information
ENCRYPTION_MASTER_KEY=your-encryption-master-key-64-character-hex-string

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# DATABASE_URL - Database connection string
# RECOMMENDED: Use PostgreSQL for production deployments
# Format: postgres://username:password@host:port/database
# Example: postgres://glx_user:secure_password@localhost:5432/glx_production
# For Vercel deployments, configure this in your environment variables
# Leave empty to use SQLite (fallback for development only)
DATABASE_URL=postgres://username:password@host:5432/glx_db

# =============================================================================
# CORS & CLIENT CONFIGURATION
# =============================================================================

# CORS_ALLOWED_ORIGINS - Primary configurable CORS origins (RECOMMENDED)
# Main configuration for CORS origins across all environments
# Use this for new deployments and configurations
# Example: https://app.vercel.app,https://custom.domain.com,https://staging.domain.com
CORS_ALLOWED_ORIGINS=https://glxcivicnetwork.me,https://glx-civic-networking.vercel.app

# Environment-specific CORS origins (optional overrides)
# These provide fine-grained control for different deployment scenarios

# CORS_DEVELOPMENT_ORIGINS - Development-specific origins
# Overrides default localhost origins if set
# CORS_DEVELOPMENT_ORIGINS=http://localhost:3000,http://localhost:5173,http://custom-dev.local

# CORS_PRODUCTION_ORIGINS - Production-specific origins 
# For explicit production domain control
# CORS_PRODUCTION_ORIGINS=https://glxcivicnetwork.me,https://www.glxcivicnetwork.me

# CORS_TEST_ORIGINS - Test environment origins
# For CI/CD and testing environments
# CORS_TEST_ORIGINS=https://test.glxcivicnetwork.me,https://staging-branch.vercel.app

# CORS_PATTERN_DOMAINS - Domain patterns for dynamic Vercel deployments
# Base domain names for branch-based deployments (without .vercel.app suffix)
# Example: glx-civic-networking,myapp will match glx-civic-networking-*.vercel.app
CORS_PATTERN_DOMAINS=glx-civic-networking,glx

# CORS_ALLOW_DEVELOPMENT - Enable development origins in non-dev environments
# Set to 'true' to allow localhost origins in production/test (use with caution)
# CORS_ALLOW_DEVELOPMENT=false

# Legacy CORS Configuration (maintained for backward compatibility)
# Use CORS_ALLOWED_ORIGINS for new setups

# CLIENT_ORIGIN - Primary CORS origin (legacy)
# Use CORS_ALLOWED_ORIGINS instead for new deployments
CLIENT_ORIGIN=https://glxcivicnetwork.me

# FRONTEND_URL - Alternative frontend URL (legacy support)
# Supports multiple frontend URLs, can be used alongside CLIENT_ORIGIN
FRONTEND_URL=https://glxcivicnetwork.me

# TRUSTED_ORIGINS - Additional trusted origins (comma-separated)
# For supporting multiple domains or development environments
# Both primary domains are supported: glx-civic-networking.vercel.app and glxcivicnetwork.me
TRUSTED_ORIGINS=https://glxcivicnetwork.me,https://glx-civic-networking.vercel.app,https://staging.glxcivicnetwork.me

# ALLOW_NO_ORIGIN_IN_PRODUCTION - Allow requests without origin in production
# Security setting for production environments (use with caution)
# Values: true, false
ALLOW_NO_ORIGIN_IN_PRODUCTION=false

# =============================================================================
# REAL-TIME COMMUNICATION (PUSHER) - ESSENTIAL
# =============================================================================

# Pusher configuration for real-time messaging and notifications
# ⚠️ ESSENTIAL: These variables are REQUIRED for the application to function
# Replace WebSocket functionality with Pusher for Vercel compatibility
# To get these values:
# 1. Create account at https://pusher.com
# 2. Create a new app in your dashboard
# 3. Copy the App ID, Key, Secret, and Cluster from your app settings
PUSHER_APP_ID=your-pusher-app-id
PUSHER_KEY=your-pusher-key
PUSHER_SECRET=your-pusher-secret
PUSHER_CLUSTER=us2

# =============================================================================
# WEBSOCKET CONFIGURATION (Legacy - now using Pusher)
# =============================================================================

# SOCKET_PATH - Custom Socket.IO path (deprecated - keeping for reference)
# Now using Pusher for real-time communication instead of Socket.IO
# SOCKET_PATH=/socket.io

# =============================================================================
# EMAIL CONFIGURATION (SMTP) - ESSENTIAL
# =============================================================================

# SMTP settings for email verification and notifications
# ⚠️ ESSENTIAL: These variables are REQUIRED for email functionality
# Required for password reset and email verification features
# Configure with your email service provider:
# - Gmail: smtp.gmail.com, port 587, use App Password
# - Outlook: smtp-mail.outlook.com, port 587
# - Yahoo: smtp.mail.yahoo.com, port 587
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-email-password
SMTP_FROM=noreply@glxcivicnetwork.me

# =============================================================================
# SMS/PHONE VERIFICATION (TWILIO) - ESSENTIAL
# =============================================================================

# Twilio configuration for phone number verification
# ⚠️ ESSENTIAL: These variables are REQUIRED for phone verification features
# Required for 2FA and phone verification features
# To get these values:
# 1. Create account at https://twilio.com
# 2. Get Account SID and Auth Token from dashboard
# 3. Purchase a phone number for your region
TWILIO_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# =============================================================================
# DEVELOPMENT & DEBUGGING
# =============================================================================

# Development-specific settings (only used when NODE_ENV=development)
# These are ignored in production for security

# Enable verbose logging in development
DEBUG=glx:*

# Enable development-specific features
DEVELOPMENT_MODE=true

# =============================================================================
# PRODUCTION & DEPLOYMENT (VERCEL)
# =============================================================================

# Production-specific URLs for deployment
# Primary domain: glxcivicnetwork.me, Vercel domain: glx-civic-networking.vercel.app
PRODUCTION_FRONTEND_URL=https://glxcivicnetwork.me
STAGING_FRONTEND_URL=https://staging.glxcivicnetwork.me

# =============================================================================
# PRODUCTION MONITORING (Sentry + DataDog)
# =============================================================================

# Sentry configuration for error tracking
# Sign up at https://sentry.io to get your DSN
SENTRY_DSN=your-sentry-dsn
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# DataDog configuration for APM and monitoring
# Sign up at https://datadoghq.com to get your API key
DD_API_KEY=your-datadog-api-key
DD_SERVICE=glx-civic-network
DD_ENV=production
DD_VERSION=0.3.0
# DD_HOSTNAME=your-hostname

# =============================================================================
# COMMUNITY LINKS
# =============================================================================

# Community platform URLs
COMMUNITY_DISCORD_URL=https://discord.gg/glx-civic
COMMUNITY_TELEGRAM_URL=https://t.me/glxcivic
COMMUNITY_TWITTER_URL=https://twitter.com/glxcivic

# =============================================================================
# HYBRID COMMUNICATION SYSTEM
# =============================================================================

# Default communication provider for real-time messaging
# Options: socketio (default), ably, pusher
COMM_DEFAULT_PROVIDER=socketio

# =============================================================================
# RESGRID CONFIGURATION (Incident/Dispatch Management)
# =============================================================================

# Resgrid API configuration for crisis/incident dispatch
# Sign up at https://resgrid.com to get these values
# RESGRID_API_KEY=your-resgrid-api-key
# RESGRID_API_URL=https://api.resgrid.com/api/v1
# RESGRID_DEPARTMENT_ID=your-department-id
# RESGRID_WEBHOOK_SECRET=your-webhook-secret

# =============================================================================
# SOCKET.IO CONFIGURATION (Alternative Real-time Provider)
# =============================================================================

# Enable Socket.io for self-hosted real-time messaging (default provider)
# Use when you need more control or want to avoid third-party dependencies
SOCKETIO_ENABLED=true
# SOCKETIO_PORT=3001
SOCKETIO_PATH=/socket.io
# SOCKETIO_CORS_ORIGINS=http://localhost:3000,https://glxcivicnetwork.me
# SOCKETIO_PING_TIMEOUT=60000
# SOCKETIO_PING_INTERVAL=25000

# =============================================================================
# ABLY CONFIGURATION (Global Real-time Messaging)
# =============================================================================

# Ably configuration for global/high-scale real-time messaging
# Use when scaling beyond Socket.io's self-hosted limits
# Sign up at https://ably.com to get these values
# ABLY_API_KEY=your-ably-api-key
# ABLY_CLIENT_ID=glx-server

# =============================================================================
# VONAGE CONFIGURATION (SMS/Voice Escalation)
# =============================================================================

# Vonage API configuration for SMS and voice escalation
# Sign up at https://vonage.com to get these values
# VONAGE_API_KEY=your-vonage-api-key
# VONAGE_API_SECRET=your-vonage-api-secret
# VONAGE_FROM_NUMBER=+1234567890
# VONAGE_APPLICATION_ID=your-application-id
# VONAGE_PRIVATE_KEY=your-private-key-path

# =============================================================================
# ESCALATION CONFIGURATION (SMS/Voice Alerts)
# =============================================================================

# Escalation settings for SMS and voice call alerts
# These control when Vonage escalation is triggered
ESCALATION_ENABLE_SMS=true
ESCALATION_ENABLE_VOICE=true
# Minimum priority to trigger escalation: low, normal, high, critical
ESCALATION_PRIORITY_THRESHOLD=high
ESCALATION_RETRY_ATTEMPTS=3
ESCALATION_RETRY_DELAY=5000

# =============================================================================
# ADDITIONAL NOTES - VERCEL DEPLOYMENT
# =============================================================================

# 1. JWT_SECRET must be at least 32 characters for production security
# 2. DATABASE_URL is RECOMMENDED - use PostgreSQL for production (Vercel Postgres)
# 3. CLIENT_ORIGIN must match your Vercel frontend domain exactly
# 4. REALTIME_PATH allows custom SSE endpoint routing if needed
# 5. All SMTP settings are required for email functionality
# 6. Twilio settings are required for phone verification features
# 7. Never commit the actual .env file to version control
# 8. Use strong, randomly generated secrets for all authentication keys
# 9. For Vercel deployment, configure all environment variables in Vercel dashboard
# 10. PostgreSQL is the recommended database for production - SQLite is development fallback only
